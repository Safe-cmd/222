# ATK-BLE02 安卓蓝牙通信应用

这是一款安卓应用，用于演示与 ATK-BLE02 模块的低功耗蓝牙 (BLE) 通信。用户可以通过本应用扫描并连接到目标BLE模块，进行数据交换，包括发送AT指令。

## 主要功能

应用支持扫描附近的BLE设备，特别会识别名为 “ATK-BLE02” 的目标设备，并尝试与之建立GATT连接。连接成功后，界面会实时显示连接状态。用户可以查看从模块接收到的数据，也可以向模块发送预定义的测试字符串或自定义的AT指令。此外，应用会自动处理不同安卓版本所需的蓝牙及位置权限，并在需要时发起设备绑定流程。

## 系统要求

*   一台支持低功耗蓝牙 (BLE) 的安卓设备。
*   一个已开机且处于可发现状态的 ATK-BLE02 模块。
*   若需从源码编译，则要准备好 Android Studio 开发环境。

## 界面布局

应用主界面包含以下交互元素：

*   状态栏 (statusTextView)：实时显示蓝牙连接与扫描的状态。
*   数据接收区 (receivedDataTextView)：以滚动列表形式展示从模块接收到的数据。
*   扫描控制 (scanButton)：标有“扫描/停止扫描”文字，用于启动或停止BLE设备扫描。
*   连接操作 (connectButton)：标有“连接目标设备”文字，若未扫描则会启动扫描，并在发现目标后自动连接。
*   AT指令输入区 (atCommandEditText)：提示用户输入AT指令，如“例如: AT+UART?”。
*   发送AT指令 (sendAtCommandButton)：将输入框中的AT指令发送至已连接的模块。
*   发送测试数据 (sendButton)：向模块发送一段预设的测试文本。

## 使用步骤

1.  授权：首次启动应用时，请根据提示授予必要的蓝牙及位置权限。
2.  开启蓝牙：确保您安卓设备的蓝牙功能已开启。
3.  扫描设备：点击“扫描/停止扫描”按钮，应用将开始搜索名为“ATK-BLE02”的设备。发现后会自动尝试连接。
4.  连接操作：如果需要手动发起，可点击“连接目标设备”按钮。连接成功后，状态栏会显示“已连接”及设备地址。
5.  数据交互：
    *   测试发送：点击“发送测试数据”按钮。
    *   AT指令：在输入框键入指令，然后点击“发送AT指令”按钮。应用会自动为指令添加回车换行符。
6.  查看数据：模块回复的数据会显示在数据接收区。
7.  断开：当应用退出或发生通信错误时，连接会自动关闭。

## 技术参数

*   目标设备名称：ATK-BLE02
*   蓝牙服务与特征UUID：
    *   服务UUID：9ECADC24-0EE5-A9E0-93F3-A3B50100406E
    *   特征 (应用写入模块)：9ECADC24-0EE5-A9E0-93F3-A3B50200406E (支持 WRITE / WRITE_NO_RESPONSE)
    *   特征 (应用接收通知)：9ECADC24-0EE5-A9E0-93F3-A3B50300406E (支持 NOTIFY)
    *   客户端特性配置描述符 (CCCD)：00002902-0000-1000-8000-00805f9b34fb
*   所需权限：
    *   Android 12 (API 31) 及以上：BLUETOOTH_SCAN, BLUETOOTH_CONNECT
    *   Android 12 (API 30) 以下：BLUETOOTH, BLUETOOTH_ADMIN, ACCESS_FINE_LOCATION
